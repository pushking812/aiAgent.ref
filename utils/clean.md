# Скрипт очистки Python кэш-файлов

## Особенности

- ✅ Удаляемые паттерны хранятся в конфигурационном файле JSON
- ✅ Поддержка аргументов командной строки
- ✅ Множественные корневые папки для поиска
- ✅ Исключение определенных папок
- ✅ Режим dry-run (просмотр без удаления)
- ✅ Управление конфигурацией через командную строку

## Конфигурационный файл

Паттерны для удаления хранятся в `clean_config.json`. Скрипт ищет конфиг в следующих местах:
1. Указанный путь через `--config`
2. `clean_config.json` в текущей папке
3. `.clean_config.json` в текущей папке
4. `config/clean_config.json`
5. `~/.clean_config.json` (глобальная конфигурация)

## Использование

### Базовое использование:

# Очистка текущей папки с настройками по умолчанию
python clean.py

# Очистка с указанием конфигурационного файла
python clean.py --config my_config.json

Управление поиском:


# Очистка нескольких папок
python clean.py -d ./project1 ./project2 ./project3

# Очистка с исключением определенных папок
python clean.py -e ./venv ./node_modules ./dist

# Комбинированный пример
python clean.py --directories ./src ./tests --exclude ./src/legacy ./tests/fixtures

Управление конфигурацией:


# Показать текущую конфигурацию
python clean.py --show-config

# Добавить новый паттерн
python clean.py --add-pattern "**/.ruff_cache"

# Добавить несколько паттернов
python clean.py --add-pattern "**/.cache" "**/tmp"

# Показать все активные паттерны
python clean.py --list-patterns

# Сбросить конфигурацию к значениям по умолчанию
python clean.py --reset-config

Безопасное тестирование:


# Режим просмотра (без фактического удаления)
python clean.py --dry-run

# Просмотр с пользовательским конфигом
python clean.py --config custom_config.json --dry-run

Формат конфигурационного файла
json

{
  "patterns": [
    "**/__pycache__",
    "**/.pytest_cache",
    "**/.coverage",
    "**/htmlcov",
    "**/.mypy_cache",
    "**/*.egg-info",
    "**/build",
    "**/dist"
  ]
}

Расширенные возможности
Абсолютные пути в паттернах:
json

{
  "patterns": [
    "/tmp/python_cache/**",
    "~/.cache/pip/**",
    "**/__pycache__"
  ]
}

Пользовательские паттерны:

Вы можете создать свой конфигурационный файл:


# Создать конфиг с базовыми паттернами
python clean.py --reset-config --config my_project_config.json

# Добавить специфичные для проекта паттерны
python clean.py --config my_project_config.json --add-pattern ".vscode" ".idea"

Глобальная конфигурация:

Создайте конфиг в домашней директории для общих настроек:


python clean.py --reset-config --config ~/.clean_config.json

Пример проекта


my_project/
├── clean.py              # Основной скрипт
├── clean_config.json     # Конфигурация проекта (опционально)
├── src/                  # Исходный код
├── tests/                # Тесты
└── README.md             # Документация

Аргументы командной строки

    -d, --directories - Корневые папки для поиска

    -e, --exclude - Папки для исключения

    -c, --config - Путь к конфигурационному файлу

    --dry-run - Режим просмотра (без удаления)

    --show-config - Показать текущую конфигурацию

    --add-pattern - Добавить паттерн(ы) в конфиг

    --reset-config - Сбросить конфигурацию

    --list-patterns - Показать активные паттерны




**Ключевые улучшения:**

1. **Конфигурационный файл JSON** для хранения паттернов
2. **Иерархический поиск конфигов** (локальные и глобальные настройки)
3. **Команды управления конфигурацией** через аргументы
4. **Поддержка абсолютных путей** в паттернах
5. **Безопасное расширение шаблонов** с обработкой ошибок
6. **Детальная информация** о загруженной конфигурации